<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CS 526 – Graphical Perception Study</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #fafaf8;
  --text: #1a1a1a;
  --muted: #6b6b6b;
  --accent: #2563eb;
  --accent2: #7c3aed;
  --border: #e5e5e3;
  --card: #ffffff;
  --serif: 'Source Serif 4', Georgia, serif;
  --sans: 'DM Sans', system-ui, sans-serif;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: var(--sans);
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  font-size: 16px;
}
.container { max-width: 960px; margin: 0 auto; padding: 0 24px; }

/* Header */
header {
  border-bottom: 1px solid var(--border);
  padding: 48px 0 40px;
  margin-bottom: 48px;
}
header .label {
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--accent);
  margin-bottom: 12px;
}
header h1 {
  font-family: var(--serif);
  font-size: 42px;
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 12px;
}
header .subtitle {
  font-size: 18px;
  color: var(--muted);
  max-width: 700px;
}
header .meta {
  margin-top: 20px;
  font-size: 14px;
  color: var(--muted);
}

/* Sections */
section { margin-bottom: 56px; }
section h2 {
  font-family: var(--serif);
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--text);
  display: inline-block;
}
section h3 {
  font-family: var(--serif);
  font-size: 20px;
  font-weight: 600;
  margin: 24px 0 10px;
}
section p {
  margin-bottom: 14px;
  max-width: 720px;
}
section ul, section ol {
  margin: 0 0 14px 24px;
  max-width: 720px;
}
section li { margin-bottom: 6px; }

/* Charts */
.chart-container {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 32px;
  margin: 24px 0;
  overflow-x: auto;
}
.chart-title {
  font-family: var(--serif);
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
}
.chart-subtitle {
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 20px;
}

/* Tooltip */
.tooltip {
  position: absolute;
  background: rgba(0,0,0,0.85);
  color: #fff;
  padding: 8px 14px;
  border-radius: 6px;
  font-size: 13px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s;
  z-index: 100;
  line-height: 1.5;
}

/* Table */
.stats-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  margin: 16px 0;
}
.stats-table th {
  text-align: left;
  padding: 10px 12px;
  border-bottom: 2px solid var(--text);
  font-weight: 600;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.stats-table td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}
.stats-table tr:hover td { background: #f5f5f3; }

/* Legend */
.legend { display: flex; gap: 24px; margin: 12px 0; font-size: 13px; flex-wrap: wrap; }
.legend-item { display: flex; align-items: center; gap: 6px; }
.legend-swatch { width: 14px; height: 14px; border-radius: 3px; }

/* Footer */
footer {
  border-top: 1px solid var(--border);
  padding: 32px 0;
  margin-top: 48px;
  font-size: 14px;
  color: var(--muted);
}

a { color: var(--accent); }
strong { font-weight: 600; }

.highlight-box {
  background: #f0f4ff;
  border-left: 4px solid var(--accent);
  padding: 16px 20px;
  border-radius: 0 6px 6px 0;
  margin: 20px 0;
  font-size: 15px;
}
</style>
</head>
<body>

<div class="container">
<header>
  <div class="label">CS 526 – Project 1</div>
  <h1>Graphical Perception: A Replication and Extension Study</h1>
  <p class="subtitle">Evaluating how accurately people interpret values across eight visualization types, replicating Cleveland &amp; McGill's foundational work and extending it with novel encodings.</p>
  <p class="meta">Harsh Jain · February 2026 · <a href="https://harshjain5903.github.io/graphical-perception-study/experiment.html" target="_blank">Try the Experiment →</a></p>
</header>

<!-- INTRODUCTION -->
<section id="introduction">
  <h2>Introduction</h2>
  <p>How accurately can people read data from different types of charts? This fundamental question underpins all of data visualization design. In their landmark 1984 study, Cleveland and McGill established a hierarchy of graphical perception—showing that some visual encodings (like position on a common scale) allow far more accurate judgments than others (like area or angle).</p>
  <p>This study replicates and extends that foundational work. We tested <strong>12 participants</strong> across <strong>8 visualization types</strong> (4 from prior literature and 4 novel designs), collecting <strong>672 total judgments</strong>. Each participant estimated the percentage of the smaller highlighted value relative to the larger one across 56 randomized trials. Our goals were to: (1) verify whether Cleveland and McGill's ranking holds with a new participant pool, and (2) evaluate four novel encoding types—radial bars, color saturation, donut charts, and star glyphs—that were not part of the original studies.</p>
</section>

<!-- BACKGROUND -->
<section id="background">
  <h2>Background</h2>
  <p>Cleveland and McGill (1984) proposed a theoretical ranking of elementary perceptual tasks, from most to least accurate: position along a common scale, position on non-aligned scales, length, direction/angle, area, volume, curvature, and shading/color saturation. They validated this ranking through controlled experiments where participants judged the ratio between two highlighted values in various chart types.</p>
  <p>Heer and Bostock (2010) replicated this work using Amazon Mechanical Turk, confirming the original findings with crowdsourced participants and extending the study to include area-based encodings such as circles and rectangles (treemaps). Their results largely supported Cleveland and McGill's hierarchy, with position-based encodings outperforming area and angle-based alternatives.</p>
  <p>More recently, Talbot, Setlur, and Anand (2014) investigated the perception of angles in pie charts and donut charts, finding that while both chart types rely on angle judgments, the presence of an inner radius in donut charts can slightly degrade performance. Their work motivates our inclusion of donut charts as a novel condition.</p>
  <p>Our study builds on this body of work by evaluating four encodings from the original literature—aligned bars, stacked bars, pie charts, and circle area—alongside four novel designs: radial bars (position on a circular axis), color saturation, donut charts, and star glyphs (irregular area encodings).</p>
</section>

<!-- METHODS -->
<section id="methods">
  <h2>Methods</h2>

  <h3>Visualization Types</h3>
  <p>We evaluated eight visualization designs, split into two categories:</p>
  <p><strong>From prior literature (4 types):</strong> Aligned Bars (position on a common scale), Stacked Bars (length judgment — participants compare lengths of bar segments without a shared baseline, corresponding to Cleveland and McGill's Types 4/5), Pie Chart (angle encoding), and Circle Area (area encoding).</p>
  <p><strong>Novel designs (4 types):</strong> Radial Bars (position along a circular axis), Color Saturation (darkness-based encoding), Donut Chart (angle with an inner radius), and Star Glyphs (irregular-shape area encoding).</p>

  <h3>Experimental Design</h3>
  <p>The experiment was organized into 8 blocks (one per visualization type), each containing 7 trials. Trials within each block used the ground-truth ratios of 14%, 25%, 38%, 50%, 62%, 75%, and 86%, consistent with the ratios used by Cleveland and McGill. The order of blocks was randomized for each participant. Each stimulus included distractor data marks to provide context, with the two target values clearly highlighted.</p>

  <h3>Participants &amp; Procedure</h3>
  <p>We recruited 12 participants (friends, family, and classmates). The experiment was hosted as a web page built with D3.js. Participants viewed one stimulus at a time, used a slider to enter their percentage estimate (0–100%), and clicked "Next" to advance. Response time was recorded automatically. The total experiment took approximately 10–15 minutes per participant. Data was downloaded as a CSV file at the end.</p>

  <h3>Error Metric</h3>
  <p>Following Cleveland and McGill, we computed the log-absolute error for each trial: <strong>log<sub>2</sub>(|response − true| + ⅛)</strong>. This transformation reduces the influence of extreme outliers and compresses the scale. We then computed the mean log-error, standard error, and 95% confidence interval (mean ± 1.96 × SE) for each visualization type.</p>
</section>

<!-- RESULTS -->
<section id="results">
  <h2>Results</h2>

  <p>The figure below shows the mean log-absolute error for each visualization type, ranked from best (lowest error) to worst. Error bars represent 95% confidence intervals. All summary statistics were computed from the collected experimental data (672 trials across 12 participants).</p>

  <div class="chart-container">
    <div class="chart-title">Mean Log-Absolute Error by Visualization Type</div>
    <div class="chart-subtitle">Lower is better · Error bars show 95% CI · n = 84 trials per type (12 participants × 7 trials)</div>
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:#2563eb"></div> From prior literature</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#7c3aed"></div> Novel designs (ours)</div>
    </div>
    <div id="chart-log-error"></div>
  </div>

  <p>Aligned bars produced the lowest error (mean log-error = 1.90), consistent with Cleveland and McGill's finding that position on a common scale is the most accurate perceptual encoding. Among our novel designs, color saturation performed surprisingly well (2.78), ranking second overall. Donut charts and pie charts produced similar error levels (2.87 and 2.96 respectively), followed by stacked bars (3.15). The worst-performing encodings were radial bars (3.33), circle area (3.74), and star glyphs (3.83).</p>

  <div class="chart-container">
    <div class="chart-title">Mean Absolute Error by Visualization Type</div>
    <div class="chart-subtitle">Absolute deviation in percentage points · Error bars show 95% CI</div>
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:#2563eb"></div> From prior literature</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#7c3aed"></div> Novel designs (ours)</div>
    </div>
    <div id="chart-abs-error"></div>
  </div>

  <p>In absolute terms, aligned bars had a mean error of about 9 percentage points, while star glyphs were off by about 20 points on average. The ranking largely mirrors the log-error chart, though the gap between designs appears more compressed on the log scale.</p>

  <div class="chart-container">
    <div class="chart-title">Comparison with Cleveland &amp; McGill (1984) and Heer &amp; Bostock (2010)</div>
    <div class="chart-subtitle">Mean log<sub>2</sub> error for overlapping visualization types · Our results alongside prior findings<br><em>Prior-study values are approximate, digitized from the original papers' published figures (CM84 Figs. 12/16; HB10 Fig. 4)</em></div>
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:#2563eb"></div> Our study</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#f59e0b"></div> Cleveland &amp; McGill (1984)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#10b981"></div> Heer &amp; Bostock (2010)</div>
    </div>
    <div id="chart-comparison"></div>
  </div>

  <p>The comparison chart shows that our results are broadly consistent with prior work. Our aligned bars error (1.90) is similar to Heer and Bostock's finding (~1.7). For stacked bars, our error (3.15) is slightly higher than Heer and Bostock (~2.7), which may reflect our smaller sample size or differences in distractor design. Pie chart and circle area errors follow the expected ordering from prior studies.</p>

  <h3>Summary Statistics</h3>
  <div class="chart-container" style="padding:20px">
    <table class="stats-table" id="stats-table">
      <thead>
        <tr>
          <th>Visualization Type</th>
          <th>Category</th>
          <th>Mean Log Error</th>
          <th>95% CI</th>
          <th>Mean Abs Error (%)</th>
          <th>95% CI</th>
          <th>Median RT (ms)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="chart-container">
    <div class="chart-title">Error Distribution by Visualization Type</div>
    <div class="chart-subtitle">Each dot is one trial · Shows spread and outliers across all participants</div>
    <div id="chart-strip"></div>
  </div>
</section>

<!-- DISCUSSION -->
<section id="discussion">
  <h2>Discussion</h2>
  <p>Our results largely replicate the Cleveland and McGill perceptual hierarchy. Position on a common scale (aligned bars) produced the most accurate judgments, while area-based encodings (circles, star glyphs) produced the worst. This aligns with decades of visualization research suggesting that designers should prefer position encodings when precise value reading is important.</p>

  <h3>Novel Design Insights</h3>
  <p><strong>Color Saturation</strong> performed better than expected, ranking second overall. This may reflect the fact that our saturation encoding used a clear darkness gradient that participants could judge relatively well. However, it is worth noting that some participants (particularly P-0YUYAXG and P-0OEYK7G) responded with 0 or 100 for many saturation trials, suggesting the encoding may be confusing for some users. This high variance is reflected in the wide confidence interval.</p>
  <p><strong>Donut Charts</strong> performed comparably to pie charts (log errors of 2.87 vs. 2.96), suggesting that the inner radius does not substantially impair angle judgments, at least at the level of precision we measured. This is relevant for designers choosing between the two formats.</p>
  <p><strong>Radial Bars</strong> performed worse than their Cartesian counterpart (aligned bars), with a mean log error of 3.33 vs. 1.90. This indicates that curvature and the lack of a shared linear baseline significantly impairs position judgment, a finding consistent with prior critiques of radial chart designs.</p>
  <p><strong>Star Glyphs</strong> had the highest error of all conditions (3.83). The irregular shapes make area comparisons extremely difficult, as participants must mentally integrate complex boundaries. This underscores Cleveland and McGill's original finding that area is a weak perceptual channel, especially when shape regularity is removed.</p>

  <h3>Limitations</h3>
  <p>Our study has several limitations. The sample size of 12 participants is relatively small, which limits statistical power and increases confidence interval width. Some participants may not have taken the task seriously (evidenced by extreme responses like 0% or 100% across many trials). We did not screen for colorblindness, which could affect the saturation condition. Block randomization reduced but may not have fully eliminated learning effects.</p>
</section>

<!-- CONCLUSION -->
<section id="conclusion">
  <h2>Conclusion</h2>
  <p>This study replicates Cleveland and McGill's foundational findings on graphical perception and extends them with four novel encoding types. The key findings are:</p>
  <ol>
    <li><strong>Position on a common scale remains the gold standard</strong> for accurate value reading, with aligned bars producing the lowest error.</li>
    <li><strong>Color saturation is a viable encoding</strong> for approximate value judgments but exhibits high variance across individuals.</li>
    <li><strong>Donut charts perform comparably to pie charts</strong>, suggesting the inner radius does not significantly degrade perception.</li>
    <li><strong>Radial position encodings are substantially worse</strong> than their linear counterparts, cautioning against the use of radial bar charts for precise comparisons.</li>
    <li><strong>Irregular area encodings (star glyphs) perform worst</strong>, confirming that area judgments are poor and shape irregularity exacerbates the problem.</li>
  </ol>
  <p>Future work could expand the participant pool, add additional novel encodings (e.g., luminance, line slope, curvature-based encodings), and investigate how contextual factors like animation, interactivity, and labeling affect perception accuracy.</p>
</section>

<footer>
  <p>CS 526 – Introduction to Visualization Evaluation · Project 1 · Harsh Jain · February 2026</p>
  <p style="margin-top:8px"><a href="https://harshjain5903.github.io/graphical-perception-study/experiment.html" target="_blank">Experiment Interface</a> · <a href="https://github.com/Harshjain5903/graphical-perception-study" target="_blank">GitHub Repository</a></p>
</footer>
</div>

<div class="tooltip" id="tooltip"></div>

<script>
// ========== DATA ==========
const data = [
  { type: "alignedBars", label: "Aligned Bars", category: "prior", meanLog: 1.900, ciLow: 1.419, ciHigh: 2.382, meanAbs: 9.06, absLow: 6.25, absHigh: 11.87, medRT: 3762 },
  { type: "saturation", label: "Color Saturation", category: "novel", meanLog: 2.780, ciLow: 2.334, ciHigh: 3.227, meanAbs: 14.80, absLow: 10.77, absHigh: 18.82, medRT: 3431 },
  { type: "donut", label: "Donut Chart", category: "novel", meanLog: 2.872, ciLow: 2.459, ciHigh: 3.286, meanAbs: 13.15, absLow: 10.22, absHigh: 16.09, medRT: 4190 },
  { type: "pie", label: "Pie Chart", category: "prior", meanLog: 2.964, ciLow: 2.593, ciHigh: 3.336, meanAbs: 12.52, absLow: 10.07, absHigh: 14.98, medRT: 3974 },
  { type: "stackedBars", label: "Stacked Bars", category: "prior", meanLog: 3.145, ciLow: 2.819, ciHigh: 3.471, meanAbs: 12.79, absLow: 10.56, absHigh: 15.01, medRT: 5292 },
  { type: "radialBars", label: "Radial Bars", category: "novel", meanLog: 3.331, ciLow: 2.917, ciHigh: 3.745, meanAbs: 18.40, absLow: 14.13, absHigh: 22.68, medRT: 4207 },
  { type: "circleArea", label: "Circle Area", category: "prior", meanLog: 3.741, ciLow: 3.437, ciHigh: 4.045, meanAbs: 18.67, absLow: 15.54, absHigh: 21.79, medRT: 3773 },
  { type: "starArea", label: "Star Glyphs", category: "novel", meanLog: 3.833, ciLow: 3.518, ciHigh: 4.148, meanAbs: 20.12, absLow: 16.91, absHigh: 23.33, medRT: 3738 }
];

// Prior study data — approximate values digitized from published figures:
// Cleveland & McGill (1984), Figures 12 & 16:
//   T1 (position, common scale) ≈ 1.10; T4/T5 (length/stacked bars) ≈ avg(2.35, 2.72) = 2.53
//   Position-angle experiment: angle ≈ 2.01
// Heer & Bostock (2010), Figure 4:
//   T1 ≈ 1.15; T4/T5 (length/stacked bars) ≈ avg(2.2, 2.5) = 2.35
//   T6 (angle/pie) ≈ 2.25; T7 (circular area) ≈ 2.80
const priorData = [
  { type: "alignedBars", label: "Aligned Bars", cm84: 1.10, hb10: 1.15 },
  { type: "stackedBars", label: "Stacked Bars", cm84: 2.53, hb10: 2.35 },
  { type: "pie", label: "Pie Chart", cm84: 2.01, hb10: 2.25 },
  { type: "circleArea", label: "Circle Area", cm84: null, hb10: 2.80 }
];

// Raw trial data for strip plot (672 individual trials)
// Raw trial data is embedded in rawTrials below (672 trials with groundTruth and response)

const tooltip = d3.select("#tooltip");
const colorPrior = "#2563eb";
const colorNovel = "#7c3aed";

// ========== CHART 1: Log Error Dot Plot ==========
(function() {
  const margin = {top: 10, right: 40, bottom: 40, left: 160};
  const width = 860 - margin.left - margin.right;
  const height = 340 - margin.top - margin.bottom;

  const svg = d3.select("#chart-log-error").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g").attr("transform", `translate(${margin.left},${margin.top})`);

  const x = d3.scaleLinear().domain([0, 5]).range([0, width]);
  const y = d3.scaleBand().domain(data.map(d => d.label)).range([0, height]).padding(0.4);

  // Grid
  svg.selectAll(".grid").data(x.ticks(5)).enter().append("line")
    .attr("x1", d => x(d)).attr("x2", d => x(d))
    .attr("y1", 0).attr("y2", height)
    .attr("stroke", "#e5e5e5").attr("stroke-dasharray", "2,3");

  svg.append("g").attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x).ticks(5))
    .selectAll("text").style("font-size", "12px");

  svg.append("text")
    .attr("x", width/2).attr("y", height + 35)
    .attr("text-anchor", "middle").style("font-size", "13px").style("fill", "#6b6b6b")
    .text("Mean Log₂(|response − true| + ⅛)");

  svg.append("g").call(d3.axisLeft(y).tickSize(0)).select(".domain").remove();
  svg.selectAll(".tick text").style("font-size", "13px").style("font-weight", "500");

  // CI lines
  svg.selectAll(".ci-line").data(data).enter().append("line")
    .attr("x1", d => x(d.ciLow)).attr("x2", d => x(d.ciHigh))
    .attr("y1", d => y(d.label) + y.bandwidth()/2)
    .attr("y2", d => y(d.label) + y.bandwidth()/2)
    .attr("stroke", d => d.category === "prior" ? colorPrior : colorNovel)
    .attr("stroke-width", 2);

  // CI caps
  data.forEach(d => {
    const cy = y(d.label) + y.bandwidth()/2;
    const col = d.category === "prior" ? colorPrior : colorNovel;
    [d.ciLow, d.ciHigh].forEach(v => {
      svg.append("line").attr("x1", x(v)).attr("x2", x(v))
        .attr("y1", cy - 5).attr("y2", cy + 5)
        .attr("stroke", col).attr("stroke-width", 2);
    });
  });

  // Dots
  svg.selectAll(".dot").data(data).enter().append("circle")
    .attr("cx", d => x(d.meanLog))
    .attr("cy", d => y(d.label) + y.bandwidth()/2)
    .attr("r", 7)
    .attr("fill", d => d.category === "prior" ? colorPrior : colorNovel)
    .attr("stroke", "#fff").attr("stroke-width", 2)
    .style("cursor", "pointer")
    .on("mouseover", (e, d) => {
      tooltip.style("opacity", 1)
        .html(`<strong>${d.label}</strong><br>Mean: ${d.meanLog.toFixed(2)}<br>95% CI: [${d.ciLow.toFixed(2)}, ${d.ciHigh.toFixed(2)}]`)
        .style("left", (e.pageX + 12) + "px").style("top", (e.pageY - 10) + "px");
    })
    .on("mouseout", () => tooltip.style("opacity", 0));

  // Value labels
  svg.selectAll(".val-label").data(data).enter().append("text")
    .attr("x", d => x(d.ciHigh) + 8)
    .attr("y", d => y(d.label) + y.bandwidth()/2 + 4)
    .text(d => d.meanLog.toFixed(2))
    .style("font-size", "12px").style("fill", "#6b6b6b").style("font-weight", "500");
})();

// ========== CHART 2: Abs Error Dot Plot ==========
(function() {
  const margin = {top: 10, right: 40, bottom: 40, left: 160};
  const width = 860 - margin.left - margin.right;
  const height = 340 - margin.top - margin.bottom;

  const svg = d3.select("#chart-abs-error").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g").attr("transform", `translate(${margin.left},${margin.top})`);

  const sorted = [...data].sort((a,b) => a.meanAbs - b.meanAbs);
  const x = d3.scaleLinear().domain([0, 28]).range([0, width]);
  const y = d3.scaleBand().domain(sorted.map(d => d.label)).range([0, height]).padding(0.4);

  svg.selectAll(".grid").data(x.ticks(6)).enter().append("line")
    .attr("x1", d => x(d)).attr("x2", d => x(d))
    .attr("y1", 0).attr("y2", height)
    .attr("stroke", "#e5e5e5").attr("stroke-dasharray", "2,3");

  svg.append("g").attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x).ticks(6))
    .selectAll("text").style("font-size", "12px");

  svg.append("text")
    .attr("x", width/2).attr("y", height + 35)
    .attr("text-anchor", "middle").style("font-size", "13px").style("fill", "#6b6b6b")
    .text("Mean Absolute Error (percentage points)");

  svg.append("g").call(d3.axisLeft(y).tickSize(0)).select(".domain").remove();
  svg.selectAll(".tick text").style("font-size", "13px").style("font-weight", "500");

  svg.selectAll(".ci-line").data(sorted).enter().append("line")
    .attr("x1", d => x(d.absLow)).attr("x2", d => x(d.absHigh))
    .attr("y1", d => y(d.label) + y.bandwidth()/2)
    .attr("y2", d => y(d.label) + y.bandwidth()/2)
    .attr("stroke", d => d.category === "prior" ? colorPrior : colorNovel)
    .attr("stroke-width", 2);

  sorted.forEach(d => {
    const cy = y(d.label) + y.bandwidth()/2;
    const col = d.category === "prior" ? colorPrior : colorNovel;
    [d.absLow, d.absHigh].forEach(v => {
      svg.append("line").attr("x1", x(v)).attr("x2", x(v))
        .attr("y1", cy - 5).attr("y2", cy + 5)
        .attr("stroke", col).attr("stroke-width", 2);
    });
  });

  svg.selectAll(".dot").data(sorted).enter().append("circle")
    .attr("cx", d => x(d.meanAbs))
    .attr("cy", d => y(d.label) + y.bandwidth()/2)
    .attr("r", 7)
    .attr("fill", d => d.category === "prior" ? colorPrior : colorNovel)
    .attr("stroke", "#fff").attr("stroke-width", 2)
    .style("cursor", "pointer")
    .on("mouseover", (e, d) => {
      tooltip.style("opacity", 1)
        .html(`<strong>${d.label}</strong><br>Mean: ${d.meanAbs.toFixed(1)}%<br>95% CI: [${d.absLow.toFixed(1)}, ${d.absHigh.toFixed(1)}]`)
        .style("left", (e.pageX + 12) + "px").style("top", (e.pageY - 10) + "px");
    })
    .on("mouseout", () => tooltip.style("opacity", 0));

  svg.selectAll(".val-label").data(sorted).enter().append("text")
    .attr("x", d => x(d.absHigh) + 8)
    .attr("y", d => y(d.label) + y.bandwidth()/2 + 4)
    .text(d => d.meanAbs.toFixed(1) + "%")
    .style("font-size", "12px").style("fill", "#6b6b6b").style("font-weight", "500");
})();

// ========== CHART 3: Comparison with prior studies ==========
(function() {
  const margin = {top: 10, right: 40, bottom: 40, left: 160};
  const width = 860 - margin.left - margin.right;
  const height = 220 - margin.top - margin.bottom;

  const svg = d3.select("#chart-comparison").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g").attr("transform", `translate(${margin.left},${margin.top})`);

  const x = d3.scaleLinear().domain([0, 5]).range([0, width]);
  const y = d3.scaleBand().domain(priorData.map(d => d.label)).range([0, height]).padding(0.35);

  svg.selectAll(".grid").data(x.ticks(5)).enter().append("line")
    .attr("x1", d => x(d)).attr("x2", d => x(d))
    .attr("y1", 0).attr("y2", height)
    .attr("stroke", "#e5e5e5").attr("stroke-dasharray", "2,3");

  svg.append("g").attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x).ticks(5))
    .selectAll("text").style("font-size", "12px");

  svg.append("text")
    .attr("x", width/2).attr("y", height + 35)
    .attr("text-anchor", "middle").style("font-size", "13px").style("fill", "#6b6b6b")
    .text("Mean Log₂ Error");

  svg.append("g").call(d3.axisLeft(y).tickSize(0)).select(".domain").remove();
  svg.selectAll(".tick text").style("font-size", "13px").style("font-weight", "500");

  const ourData = {
    "alignedBars": 1.90, "stackedBars": 3.145, "pie": 2.964, "circleArea": 3.741
  };

  const bw = y.bandwidth();
  const offset = bw / 4;

  priorData.forEach(d => {
    const cy = y(d.label);
    // Our study
    svg.append("circle").attr("cx", x(ourData[d.type])).attr("cy", cy + offset)
      .attr("r", 6).attr("fill", colorPrior).attr("stroke", "#fff").attr("stroke-width", 1.5);
    // C&M 1984
    if (d.cm84 !== null) {
      svg.append("path").attr("d", d3.symbol().type(d3.symbolDiamond).size(80))
        .attr("transform", `translate(${x(d.cm84)},${cy + offset*2})`)
        .attr("fill", "#f59e0b").attr("stroke", "#fff").attr("stroke-width", 1);
    }
    // H&B 2010
    if (d.hb10 !== null) {
      svg.append("rect")
        .attr("x", x(d.hb10) - 5).attr("y", cy + offset*3 - 5)
        .attr("width", 10).attr("height", 10).attr("rx", 2)
        .attr("fill", "#10b981").attr("stroke", "#fff").attr("stroke-width", 1);
    }
  });
})();

// ========== STATS TABLE ==========
(function() {
  const tbody = d3.select("#stats-table tbody");
  data.forEach(d => {
    const cat = d.category === "prior" ? "Prior literature" : "Novel (ours)";
    tbody.append("tr").html(`
      <td><strong>${d.label}</strong></td>
      <td>${cat}</td>
      <td>${d.meanLog.toFixed(2)}</td>
      <td>[${d.ciLow.toFixed(2)}, ${d.ciHigh.toFixed(2)}]</td>
      <td>${d.meanAbs.toFixed(1)}</td>
      <td>[${d.absLow.toFixed(1)}, ${d.absHigh.toFixed(1)}]</td>
      <td>${d.medRT.toLocaleString()}</td>
    `);
  });
})();

// ========== CHART 4: Strip plot from raw data ==========
(function() {
  // We'll generate the strip plot from the embedded raw data
  // Reconstruct per-trial errors from the aggregated data approach
  const rawTrials = [{"t": "radialBars", "g": 25, "r": 19}, {"t": "radialBars", "g": 75, "r": 70}, {"t": "radialBars", "g": 86, "r": 70}, {"t": "radialBars", "g": 14, "r": 11}, {"t": "radialBars", "g": 62, "r": 50}, {"t": "radialBars", "g": 38, "r": 22}, {"t": "radialBars", "g": 50, "r": 49}, {"t": "alignedBars", "g": 14, "r": 14}, {"t": "alignedBars", "g": 38, "r": 50}, {"t": "alignedBars", "g": 50, "r": 51}, {"t": "alignedBars", "g": 25, "r": 25}, {"t": "alignedBars", "g": 86, "r": 80}, {"t": "alignedBars", "g": 75, "r": 74}, {"t": "alignedBars", "g": 62, "r": 60}, {"t": "starArea", "g": 14, "r": 50}, {"t": "starArea", "g": 86, "r": 82}, {"t": "starArea", "g": 38, "r": 56}, {"t": "starArea", "g": 25, "r": 50}, {"t": "starArea", "g": 62, "r": 80}, {"t": "starArea", "g": 50, "r": 84}, {"t": "starArea", "g": 75, "r": 79}, {"t": "saturation", "g": 25, "r": 50}, {"t": "saturation", "g": 62, "r": 75}, {"t": "saturation", "g": 75, "r": 81}, {"t": "saturation", "g": 14, "r": 50}, {"t": "saturation", "g": 86, "r": 83}, {"t": "saturation", "g": 38, "r": 40}, {"t": "saturation", "g": 50, "r": 50}, {"t": "circleArea", "g": 50, "r": 20}, {"t": "circleArea", "g": 14, "r": 30}, {"t": "circleArea", "g": 75, "r": 80}, {"t": "circleArea", "g": 62, "r": 80}, {"t": "circleArea", "g": 86, "r": 80}, {"t": "circleArea", "g": 38, "r": 60}, {"t": "circleArea", "g": 25, "r": 39}, {"t": "stackedBars", "g": 14, "r": 11}, {"t": "stackedBars", "g": 86, "r": 80}, {"t": "stackedBars", "g": 62, "r": 80}, {"t": "stackedBars", "g": 75, "r": 85}, {"t": "stackedBars", "g": 38, "r": 38}, {"t": "stackedBars", "g": 50, "r": 48}, {"t": "stackedBars", "g": 25, "r": 13}, {"t": "pie", "g": 50, "r": 31}, {"t": "pie", "g": 86, "r": 85}, {"t": "pie", "g": 25, "r": 80}, {"t": "pie", "g": 75, "r": 65}, {"t": "pie", "g": 14, "r": 20}, {"t": "pie", "g": 62, "r": 50}, {"t": "pie", "g": 38, "r": 20}, {"t": "donut", "g": 14, "r": 20}, {"t": "donut", "g": 75, "r": 50}, {"t": "donut", "g": 62, "r": 61}, {"t": "donut", "g": 25, "r": 20}, {"t": "donut", "g": 38, "r": 30}, {"t": "donut", "g": 86, "r": 78}, {"t": "donut", "g": 50, "r": 40}, {"t": "stackedBars", "g": 14, "r": 22}, {"t": "stackedBars", "g": 38, "r": 28}, {"t": "stackedBars", "g": 75, "r": 42}, {"t": "stackedBars", "g": 62, "r": 50}, {"t": "stackedBars", "g": 25, "r": 13}, {"t": "stackedBars", "g": 50, "r": 19}, {"t": "stackedBars", "g": 86, "r": 41}, {"t": "circleArea", "g": 62, "r": 39}, {"t": "circleArea", "g": 86, "r": 77}, {"t": "circleArea", "g": 50, "r": 59}, {"t": "circleArea", "g": 14, "r": 55}, {"t": "circleArea", "g": 75, "r": 82}, {"t": "circleArea", "g": 38, "r": 45}, {"t": "circleArea", "g": 25, "r": 26}, {"t": "saturation", "g": 75, "r": 77}, {"t": "saturation", "g": 50, "r": 51}, {"t": "saturation", "g": 62, "r": 70}, {"t": "saturation", "g": 38, "r": 34}, {"t": "saturation", "g": 14, "r": 20}, {"t": "saturation", "g": 86, "r": 92}, {"t": "saturation", "g": 25, "r": 25}, {"t": "alignedBars", "g": 14, "r": 27}, {"t": "alignedBars", "g": 25, "r": 28}, {"t": "alignedBars", "g": 86, "r": 78}, {"t": "alignedBars", "g": 50, "r": 60}, {"t": "alignedBars", "g": 75, "r": 93}, {"t": "alignedBars", "g": 38, "r": 31}, {"t": "alignedBars", "g": 62, "r": 41}, {"t": "starArea", "g": 62, "r": 60}, {"t": "starArea", "g": 86, "r": 54}, {"t": "starArea", "g": 75, "r": 47}, {"t": "starArea", "g": 25, "r": 32}, {"t": "starArea", "g": 14, "r": 22}, {"t": "starArea", "g": 50, "r": 75}, {"t": "starArea", "g": 38, "r": 62}, {"t": "donut", "g": 62, "r": 87}, {"t": "donut", "g": 86, "r": 84}, {"t": "donut", "g": 25, "r": 23}, {"t": "donut", "g": 50, "r": 59}, {"t": "donut", "g": 38, "r": 29}, {"t": "donut", "g": 14, "r": 72}, {"t": "donut", "g": 75, "r": 25}, {"t": "radialBars", "g": 25, "r": 38}, {"t": "radialBars", "g": 86, "r": 80}, {"t": "radialBars", "g": 38, "r": 30}, {"t": "radialBars", "g": 62, "r": 27}, {"t": "radialBars", "g": 50, "r": 42}, {"t": "radialBars", "g": 75, "r": 36}, {"t": "radialBars", "g": 14, "r": 15}, {"t": "pie", "g": 25, "r": 14}, {"t": "pie", "g": 75, "r": 33}, {"t": "pie", "g": 38, "r": 38}, {"t": "pie", "g": 50, "r": 28}, {"t": "pie", "g": 62, "r": 24}, {"t": "pie", "g": 14, "r": 13}, {"t": "pie", "g": 86, "r": 75}, {"t": "starArea", "g": 38, "r": 32}, {"t": "starArea", "g": 25, "r": 50}, {"t": "starArea", "g": 86, "r": 0}, {"t": "starArea", "g": 50, "r": 50}, {"t": "starArea", "g": 62, "r": 100}, {"t": "starArea", "g": 75, "r": 52}, {"t": "starArea", "g": 14, "r": 50}, {"t": "radialBars", "g": 75, "r": 0}, {"t": "radialBars", "g": 62, "r": 0}, {"t": "radialBars", "g": 25, "r": 100}, {"t": "radialBars", "g": 50, "r": 99}, {"t": "radialBars", "g": 38, "r": 0}, {"t": "radialBars", "g": 86, "r": 0}, {"t": "radialBars", "g": 14, "r": 100}, {"t": "donut", "g": 50, "r": 50}, {"t": "donut", "g": 38, "r": 49}, {"t": "donut", "g": 75, "r": 54}, {"t": "donut", "g": 86, "r": 82}, {"t": "donut", "g": 62, "r": 80}, {"t": "donut", "g": 25, "r": 57}, {"t": "donut", "g": 14, "r": 80}, {"t": "circleArea", "g": 86, "r": 43}, {"t": "circleArea", "g": 75, "r": 46}, {"t": "circleArea", "g": 25, "r": 85}, {"t": "circleArea", "g": 38, "r": 49}, {"t": "circleArea", "g": 50, "r": 84}, {"t": "circleArea", "g": 14, "r": 100}, {"t": "circleArea", "g": 62, "r": 76}, {"t": "alignedBars", "g": 25, "r": 76}, {"t": "alignedBars", "g": 75, "r": 41}, {"t": "alignedBars", "g": 62, "r": 69}, {"t": "alignedBars", "g": 38, "r": 33}, {"t": "alignedBars", "g": 86, "r": 67}, {"t": "alignedBars", "g": 14, "r": 10}, {"t": "alignedBars", "g": 50, "r": 55}, {"t": "saturation", "g": 86, "r": 100}, {"t": "saturation", "g": 75, "r": 100}, {"t": "saturation", "g": 38, "r": 100}, {"t": "saturation", "g": 14, "r": 100}, {"t": "saturation", "g": 50, "r": 100}, {"t": "saturation", "g": 25, "r": 100}, {"t": "saturation", "g": 62, "r": 96}, {"t": "pie", "g": 14, "r": 3}, {"t": "pie", "g": 38, "r": 32}, {"t": "pie", "g": 75, "r": 74}, {"t": "pie", "g": 50, "r": 63}, {"t": "pie", "g": 86, "r": 100}, {"t": "pie", "g": 62, "r": 100}, {"t": "pie", "g": 25, "r": 41}, {"t": "stackedBars", "g": 86, "r": 70}, {"t": "stackedBars", "g": 14, "r": 8}, {"t": "stackedBars", "g": 25, "r": 10}, {"t": "stackedBars", "g": 38, "r": 29}, {"t": "stackedBars", "g": 75, "r": 65}, {"t": "stackedBars", "g": 50, "r": 47}, {"t": "stackedBars", "g": 62, "r": 33}, {"t": "donut", "g": 50, "r": 25}, {"t": "donut", "g": 38, "r": 66}, {"t": "donut", "g": 25, "r": 50}, {"t": "donut", "g": 86, "r": 50}, {"t": "donut", "g": 75, "r": 41}, {"t": "donut", "g": 14, "r": 68}, {"t": "donut", "g": 62, "r": 41}, {"t": "pie", "g": 38, "r": 46}, {"t": "pie", "g": 14, "r": 8}, {"t": "pie", "g": 86, "r": 50}, {"t": "pie", "g": 75, "r": 25}, {"t": "pie", "g": 25, "r": 4}, {"t": "pie", "g": 50, "r": 12}, {"t": "pie", "g": 62, "r": 56}, {"t": "saturation", "g": 38, "r": 25}, {"t": "saturation", "g": 25, "r": 0}, {"t": "saturation", "g": 50, "r": 0}, {"t": "saturation", "g": 86, "r": 25}, {"t": "saturation", "g": 75, "r": 0}, {"t": "saturation", "g": 62, "r": 0}, {"t": "saturation", "g": 14, "r": 0}, {"t": "stackedBars", "g": 14, "r": 50}, {"t": "stackedBars", "g": 38, "r": 28}, {"t": "stackedBars", "g": 86, "r": 74}, {"t": "stackedBars", "g": 62, "r": 52}, {"t": "stackedBars", "g": 50, "r": 52}, {"t": "stackedBars", "g": 25, "r": 83}, {"t": "stackedBars", "g": 75, "r": 78}, {"t": "circleArea", "g": 14, "r": 47}, {"t": "circleArea", "g": 25, "r": 51}, {"t": "circleArea", "g": 62, "r": 40}, {"t": "circleArea", "g": 86, "r": 42}, {"t": "circleArea", "g": 38, "r": 23}, {"t": "circleArea", "g": 75, "r": 51}, {"t": "circleArea", "g": 50, "r": 19}, {"t": "starArea", "g": 25, "r": 12}, {"t": "starArea", "g": 75, "r": 22}, {"t": "starArea", "g": 14, "r": 79}, {"t": "starArea", "g": 86, "r": 43}, {"t": "starArea", "g": 38, "r": 59}, {"t": "starArea", "g": 62, "r": 73}, {"t": "starArea", "g": 50, "r": 53}, {"t": "alignedBars", "g": 14, "r": 69}, {"t": "alignedBars", "g": 50, "r": 51}, {"t": "alignedBars", "g": 75, "r": 52}, {"t": "alignedBars", "g": 25, "r": 52}, {"t": "alignedBars", "g": 62, "r": 19}, {"t": "alignedBars", "g": 38, "r": 42}, {"t": "alignedBars", "g": 86, "r": 34}, {"t": "radialBars", "g": 75, "r": 52}, {"t": "radialBars", "g": 50, "r": 40}, {"t": "radialBars", "g": 38, "r": 12}, {"t": "radialBars", "g": 62, "r": 52}, {"t": "radialBars", "g": 25, "r": 65}, {"t": "radialBars", "g": 14, "r": 51}, {"t": "radialBars", "g": 86, "r": 39}, {"t": "donut", "g": 75, "r": 23}, {"t": "donut", "g": 50, "r": 50}, {"t": "donut", "g": 62, "r": 50}, {"t": "donut", "g": 38, "r": 20}, {"t": "donut", "g": 25, "r": 20}, {"t": "donut", "g": 14, "r": 10}, {"t": "donut", "g": 86, "r": 80}, {"t": "stackedBars", "g": 25, "r": 10}, {"t": "stackedBars", "g": 50, "r": 40}, {"t": "stackedBars", "g": 86, "r": 70}, {"t": "stackedBars", "g": 75, "r": 70}, {"t": "stackedBars", "g": 38, "r": 20}, {"t": "stackedBars", "g": 62, "r": 50}, {"t": "stackedBars", "g": 14, "r": 5}, {"t": "radialBars", "g": 75, "r": 70}, {"t": "radialBars", "g": 50, "r": 40}, {"t": "radialBars", "g": 86, "r": 80}, {"t": "radialBars", "g": 25, "r": 20}, {"t": "radialBars", "g": 62, "r": 50}, {"t": "radialBars", "g": 38, "r": 25}, {"t": "radialBars", "g": 14, "r": 34}, {"t": "saturation", "g": 62, "r": 50}, {"t": "saturation", "g": 75, "r": 70}, {"t": "saturation", "g": 50, "r": 50}, {"t": "saturation", "g": 86, "r": 80}, {"t": "saturation", "g": 38, "r": 35}, {"t": "saturation", "g": 25, "r": 30}, {"t": "saturation", "g": 14, "r": 20}, {"t": "alignedBars", "g": 86, "r": 85}, {"t": "alignedBars", "g": 50, "r": 50}, {"t": "alignedBars", "g": 25, "r": 20}, {"t": "alignedBars", "g": 75, "r": 70}, {"t": "alignedBars", "g": 14, "r": 15}, {"t": "alignedBars", "g": 62, "r": 50}, {"t": "alignedBars", "g": 38, "r": 35}, {"t": "circleArea", "g": 62, "r": 80}, {"t": "circleArea", "g": 86, "r": 90}, {"t": "circleArea", "g": 14, "r": 35}, {"t": "circleArea", "g": 38, "r": 80}, {"t": "circleArea", "g": 25, "r": 40}, {"t": "circleArea", "g": 50, "r": 75}, {"t": "circleArea", "g": 75, "r": 80}, {"t": "starArea", "g": 38, "r": 75}, {"t": "starArea", "g": 50, "r": 75}, {"t": "starArea", "g": 14, "r": 50}, {"t": "starArea", "g": 25, "r": 20}, {"t": "starArea", "g": 86, "r": 80}, {"t": "starArea", "g": 75, "r": 90}, {"t": "starArea", "g": 62, "r": 80}, {"t": "pie", "g": 50, "r": 50}, {"t": "pie", "g": 25, "r": 20}, {"t": "pie", "g": 86, "r": 70}, {"t": "pie", "g": 14, "r": 19}, {"t": "pie", "g": 75, "r": 50}, {"t": "pie", "g": 62, "r": 50}, {"t": "pie", "g": 38, "r": 25}, {"t": "saturation", "g": 38, "r": 50}, {"t": "saturation", "g": 25, "r": 30}, {"t": "saturation", "g": 75, "r": 60}, {"t": "saturation", "g": 14, "r": 20}, {"t": "saturation", "g": 86, "r": 80}, {"t": "saturation", "g": 62, "r": 40}, {"t": "saturation", "g": 50, "r": 35}, {"t": "radialBars", "g": 62, "r": 50}, {"t": "radialBars", "g": 38, "r": 25}, {"t": "radialBars", "g": 86, "r": 80}, {"t": "radialBars", "g": 14, "r": 5}, {"t": "radialBars", "g": 50, "r": 30}, {"t": "radialBars", "g": 75, "r": 80}, {"t": "radialBars", "g": 25, "r": 10}, {"t": "starArea", "g": 86, "r": 90}, {"t": "starArea", "g": 50, "r": 80}, {"t": "starArea", "g": 75, "r": 70}, {"t": "starArea", "g": 25, "r": 50}, {"t": "starArea", "g": 62, "r": 65}, {"t": "starArea", "g": 14, "r": 30}, {"t": "starArea", "g": 38, "r": 50}, {"t": "circleArea", "g": 38, "r": 50}, {"t": "circleArea", "g": 14, "r": 30}, {"t": "circleArea", "g": 62, "r": 75}, {"t": "circleArea", "g": 25, "r": 30}, {"t": "circleArea", "g": 75, "r": 70}, {"t": "circleArea", "g": 50, "r": 50}, {"t": "circleArea", "g": 86, "r": 80}, {"t": "stackedBars", "g": 38, "r": 40}, {"t": "stackedBars", "g": 25, "r": 10}, {"t": "stackedBars", "g": 62, "r": 40}, {"t": "stackedBars", "g": 50, "r": 30}, {"t": "stackedBars", "g": 14, "r": 10}, {"t": "stackedBars", "g": 75, "r": 60}, {"t": "stackedBars", "g": 86, "r": 80}, {"t": "donut", "g": 50, "r": 40}, {"t": "donut", "g": 38, "r": 30}, {"t": "donut", "g": 62, "r": 50}, {"t": "donut", "g": 25, "r": 20}, {"t": "donut", "g": 75, "r": 65}, {"t": "donut", "g": 86, "r": 70}, {"t": "donut", "g": 14, "r": 10}, {"t": "alignedBars", "g": 14, "r": 10}, {"t": "alignedBars", "g": 38, "r": 40}, {"t": "alignedBars", "g": 86, "r": 85}, {"t": "alignedBars", "g": 25, "r": 15}, {"t": "alignedBars", "g": 50, "r": 50}, {"t": "alignedBars", "g": 75, "r": 75}, {"t": "alignedBars", "g": 62, "r": 80}, {"t": "pie", "g": 62, "r": 50}, {"t": "pie", "g": 50, "r": 40}, {"t": "pie", "g": 86, "r": 85}, {"t": "pie", "g": 75, "r": 50}, {"t": "pie", "g": 25, "r": 20}, {"t": "pie", "g": 14, "r": 10}, {"t": "pie", "g": 38, "r": 10}, {"t": "alignedBars", "g": 25, "r": 30}, {"t": "alignedBars", "g": 62, "r": 67}, {"t": "alignedBars", "g": 38, "r": 41}, {"t": "alignedBars", "g": 50, "r": 60}, {"t": "alignedBars", "g": 14, "r": 16}, {"t": "alignedBars", "g": 75, "r": 80}, {"t": "alignedBars", "g": 86, "r": 87}, {"t": "pie", "g": 50, "r": 47}, {"t": "pie", "g": 62, "r": 40}, {"t": "pie", "g": 75, "r": 61}, {"t": "pie", "g": 86, "r": 90}, {"t": "pie", "g": 25, "r": 36}, {"t": "pie", "g": 38, "r": 41}, {"t": "pie", "g": 14, "r": 18}, {"t": "stackedBars", "g": 38, "r": 40}, {"t": "stackedBars", "g": 75, "r": 85}, {"t": "stackedBars", "g": 25, "r": 20}, {"t": "stackedBars", "g": 14, "r": 14}, {"t": "stackedBars", "g": 50, "r": 44}, {"t": "stackedBars", "g": 62, "r": 58}, {"t": "stackedBars", "g": 86, "r": 82}, {"t": "radialBars", "g": 25, "r": 25}, {"t": "radialBars", "g": 75, "r": 75}, {"t": "radialBars", "g": 62, "r": 50}, {"t": "radialBars", "g": 50, "r": 50}, {"t": "radialBars", "g": 38, "r": 39}, {"t": "radialBars", "g": 14, "r": 32}, {"t": "radialBars", "g": 86, "r": 80}, {"t": "donut", "g": 50, "r": 42}, {"t": "donut", "g": 75, "r": 82}, {"t": "donut", "g": 86, "r": 87}, {"t": "donut", "g": 14, "r": 18}, {"t": "donut", "g": 38, "r": 44}, {"t": "donut", "g": 25, "r": 30}, {"t": "donut", "g": 62, "r": 39}, {"t": "starArea", "g": 86, "r": 90}, {"t": "starArea", "g": 38, "r": 56}, {"t": "starArea", "g": 62, "r": 72}, {"t": "starArea", "g": 25, "r": 39}, {"t": "starArea", "g": 14, "r": 20}, {"t": "starArea", "g": 50, "r": 69}, {"t": "starArea", "g": 75, "r": 68}, {"t": "saturation", "g": 25, "r": 41}, {"t": "saturation", "g": 50, "r": 56}, {"t": "saturation", "g": 62, "r": 72}, {"t": "saturation", "g": 75, "r": 85}, {"t": "saturation", "g": 14, "r": 15}, {"t": "saturation", "g": 38, "r": 22}, {"t": "saturation", "g": 86, "r": 87}, {"t": "circleArea", "g": 14, "r": 36}, {"t": "circleArea", "g": 50, "r": 68}, {"t": "circleArea", "g": 75, "r": 80}, {"t": "circleArea", "g": 86, "r": 78}, {"t": "circleArea", "g": 38, "r": 46}, {"t": "circleArea", "g": 62, "r": 57}, {"t": "circleArea", "g": 25, "r": 52}, {"t": "donut", "g": 50, "r": 32}, {"t": "donut", "g": 75, "r": 53}, {"t": "donut", "g": 14, "r": 15}, {"t": "donut", "g": 25, "r": 20}, {"t": "donut", "g": 62, "r": 43}, {"t": "donut", "g": 38, "r": 29}, {"t": "donut", "g": 86, "r": 85}, {"t": "radialBars", "g": 25, "r": 9}, {"t": "radialBars", "g": 38, "r": 17}, {"t": "radialBars", "g": 86, "r": 66}, {"t": "radialBars", "g": 14, "r": 10}, {"t": "radialBars", "g": 75, "r": 50}, {"t": "radialBars", "g": 50, "r": 31}, {"t": "radialBars", "g": 62, "r": 49}, {"t": "circleArea", "g": 25, "r": 41}, {"t": "circleArea", "g": 75, "r": 56}, {"t": "circleArea", "g": 50, "r": 60}, {"t": "circleArea", "g": 86, "r": 85}, {"t": "circleArea", "g": 14, "r": 20}, {"t": "circleArea", "g": 62, "r": 20}, {"t": "circleArea", "g": 38, "r": 50}, {"t": "alignedBars", "g": 25, "r": 16}, {"t": "alignedBars", "g": 14, "r": 10}, {"t": "alignedBars", "g": 86, "r": 82}, {"t": "alignedBars", "g": 75, "r": 76}, {"t": "alignedBars", "g": 50, "r": 50}, {"t": "alignedBars", "g": 38, "r": 35}, {"t": "alignedBars", "g": 62, "r": 60}, {"t": "saturation", "g": 25, "r": 29}, {"t": "saturation", "g": 38, "r": 9}, {"t": "saturation", "g": 14, "r": 15}, {"t": "saturation", "g": 50, "r": 49}, {"t": "saturation", "g": 75, "r": 67}, {"t": "saturation", "g": 62, "r": 72}, {"t": "saturation", "g": 86, "r": 80}, {"t": "stackedBars", "g": 50, "r": 43}, {"t": "stackedBars", "g": 75, "r": 50}, {"t": "stackedBars", "g": 62, "r": 50}, {"t": "stackedBars", "g": 86, "r": 82}, {"t": "stackedBars", "g": 14, "r": 4}, {"t": "stackedBars", "g": 38, "r": 18}, {"t": "stackedBars", "g": 25, "r": 9}, {"t": "starArea", "g": 50, "r": 70}, {"t": "starArea", "g": 38, "r": 66}, {"t": "starArea", "g": 75, "r": 85}, {"t": "starArea", "g": 86, "r": 91}, {"t": "starArea", "g": 25, "r": 41}, {"t": "starArea", "g": 62, "r": 81}, {"t": "starArea", "g": 14, "r": 28}, {"t": "pie", "g": 62, "r": 51}, {"t": "pie", "g": 25, "r": 22}, {"t": "pie", "g": 86, "r": 88}, {"t": "pie", "g": 50, "r": 41}, {"t": "pie", "g": 14, "r": 11}, {"t": "pie", "g": 75, "r": 51}, {"t": "pie", "g": 38, "r": 18}, {"t": "starArea", "g": 86, "r": 85}, {"t": "starArea", "g": 50, "r": 80}, {"t": "starArea", "g": 75, "r": 85}, {"t": "starArea", "g": 38, "r": 60}, {"t": "starArea", "g": 62, "r": 90}, {"t": "starArea", "g": 14, "r": 40}, {"t": "starArea", "g": 25, "r": 40}, {"t": "stackedBars", "g": 14, "r": 15}, {"t": "stackedBars", "g": 86, "r": 70}, {"t": "stackedBars", "g": 38, "r": 35}, {"t": "stackedBars", "g": 75, "r": 50}, {"t": "stackedBars", "g": 25, "r": 40}, {"t": "stackedBars", "g": 62, "r": 45}, {"t": "stackedBars", "g": 50, "r": 40}, {"t": "alignedBars", "g": 25, "r": 20}, {"t": "alignedBars", "g": 86, "r": 85}, {"t": "alignedBars", "g": 50, "r": 50}, {"t": "alignedBars", "g": 75, "r": 73}, {"t": "alignedBars", "g": 62, "r": 72}, {"t": "alignedBars", "g": 38, "r": 25}, {"t": "alignedBars", "g": 14, "r": 20}, {"t": "pie", "g": 86, "r": 80}, {"t": "pie", "g": 75, "r": 83}, {"t": "pie", "g": 25, "r": 30}, {"t": "pie", "g": 50, "r": 38}, {"t": "pie", "g": 38, "r": 28}, {"t": "pie", "g": 62, "r": 52}, {"t": "pie", "g": 14, "r": 18}, {"t": "saturation", "g": 25, "r": 43}, {"t": "saturation", "g": 86, "r": 66}, {"t": "saturation", "g": 62, "r": 66}, {"t": "saturation", "g": 14, "r": 34}, {"t": "saturation", "g": 50, "r": 51}, {"t": "saturation", "g": 38, "r": 43}, {"t": "saturation", "g": 75, "r": 79}, {"t": "circleArea", "g": 38, "r": 51}, {"t": "circleArea", "g": 86, "r": 93}, {"t": "circleArea", "g": 25, "r": 45}, {"t": "circleArea", "g": 50, "r": 51}, {"t": "circleArea", "g": 62, "r": 51}, {"t": "circleArea", "g": 14, "r": 20}, {"t": "circleArea", "g": 75, "r": 41}, {"t": "radialBars", "g": 86, "r": 66}, {"t": "radialBars", "g": 50, "r": 38}, {"t": "radialBars", "g": 14, "r": 15}, {"t": "radialBars", "g": 75, "r": 58}, {"t": "radialBars", "g": 62, "r": 50}, {"t": "radialBars", "g": 38, "r": 27}, {"t": "radialBars", "g": 25, "r": 17}, {"t": "donut", "g": 50, "r": 44}, {"t": "donut", "g": 86, "r": 75}, {"t": "donut", "g": 14, "r": 19}, {"t": "donut", "g": 38, "r": 28}, {"t": "donut", "g": 25, "r": 17}, {"t": "donut", "g": 62, "r": 43}, {"t": "donut", "g": 75, "r": 63}, {"t": "circleArea", "g": 62, "r": 50}, {"t": "circleArea", "g": 50, "r": 40}, {"t": "circleArea", "g": 86, "r": 72}, {"t": "circleArea", "g": 25, "r": 18}, {"t": "circleArea", "g": 75, "r": 80}, {"t": "circleArea", "g": 38, "r": 52}, {"t": "circleArea", "g": 14, "r": 28}, {"t": "alignedBars", "g": 75, "r": 70}, {"t": "alignedBars", "g": 25, "r": 21}, {"t": "alignedBars", "g": 38, "r": 32}, {"t": "alignedBars", "g": 62, "r": 59}, {"t": "alignedBars", "g": 50, "r": 50}, {"t": "alignedBars", "g": 14, "r": 19}, {"t": "alignedBars", "g": 86, "r": 76}, {"t": "saturation", "g": 25, "r": 24}, {"t": "saturation", "g": 14, "r": 10}, {"t": "saturation", "g": 75, "r": 50}, {"t": "saturation", "g": 38, "r": 51}, {"t": "saturation", "g": 50, "r": 69}, {"t": "saturation", "g": 86, "r": 80}, {"t": "saturation", "g": 62, "r": 67}, {"t": "donut", "g": 25, "r": 32}, {"t": "donut", "g": 62, "r": 55}, {"t": "donut", "g": 86, "r": 74}, {"t": "donut", "g": 14, "r": 17}, {"t": "donut", "g": 50, "r": 37}, {"t": "donut", "g": 75, "r": 63}, {"t": "donut", "g": 38, "r": 36}, {"t": "radialBars", "g": 75, "r": 74}, {"t": "radialBars", "g": 50, "r": 36}, {"t": "radialBars", "g": 38, "r": 16}, {"t": "radialBars", "g": 14, "r": 10}, {"t": "radialBars", "g": 62, "r": 61}, {"t": "radialBars", "g": 86, "r": 73}, {"t": "radialBars", "g": 25, "r": 23}, {"t": "pie", "g": 38, "r": 22}, {"t": "pie", "g": 86, "r": 63}, {"t": "pie", "g": 75, "r": 83}, {"t": "pie", "g": 14, "r": 20}, {"t": "pie", "g": 50, "r": 33}, {"t": "pie", "g": 25, "r": 26}, {"t": "pie", "g": 62, "r": 53}, {"t": "starArea", "g": 75, "r": 83}, {"t": "starArea", "g": 50, "r": 65}, {"t": "starArea", "g": 25, "r": 49}, {"t": "starArea", "g": 86, "r": 87}, {"t": "starArea", "g": 38, "r": 60}, {"t": "starArea", "g": 14, "r": 36}, {"t": "starArea", "g": 62, "r": 65}, {"t": "stackedBars", "g": 86, "r": 62}, {"t": "stackedBars", "g": 14, "r": 22}, {"t": "stackedBars", "g": 38, "r": 29}, {"t": "stackedBars", "g": 75, "r": 59}, {"t": "stackedBars", "g": 25, "r": 20}, {"t": "stackedBars", "g": 62, "r": 45}, {"t": "stackedBars", "g": 50, "r": 31}, {"t": "radialBars", "g": 14, "r": 84}, {"t": "radialBars", "g": 25, "r": 85}, {"t": "radialBars", "g": 38, "r": 14}, {"t": "radialBars", "g": 86, "r": 79}, {"t": "radialBars", "g": 75, "r": 78}, {"t": "radialBars", "g": 50, "r": 71}, {"t": "radialBars", "g": 62, "r": 76}, {"t": "stackedBars", "g": 38, "r": 24}, {"t": "stackedBars", "g": 14, "r": 18}, {"t": "stackedBars", "g": 62, "r": 25}, {"t": "stackedBars", "g": 86, "r": 66}, {"t": "stackedBars", "g": 75, "r": 69}, {"t": "stackedBars", "g": 50, "r": 65}, {"t": "stackedBars", "g": 25, "r": 21}, {"t": "alignedBars", "g": 86, "r": 87}, {"t": "alignedBars", "g": 38, "r": 42}, {"t": "alignedBars", "g": 50, "r": 55}, {"t": "alignedBars", "g": 75, "r": 69}, {"t": "alignedBars", "g": 25, "r": 23}, {"t": "alignedBars", "g": 14, "r": 7}, {"t": "alignedBars", "g": 62, "r": 77}, {"t": "pie", "g": 62, "r": 37}, {"t": "pie", "g": 75, "r": 90}, {"t": "pie", "g": 25, "r": 22}, {"t": "pie", "g": 86, "r": 97}, {"t": "pie", "g": 50, "r": 60}, {"t": "pie", "g": 14, "r": 9}, {"t": "pie", "g": 38, "r": 46}, {"t": "donut", "g": 38, "r": 30}, {"t": "donut", "g": 62, "r": 62}, {"t": "donut", "g": 25, "r": 21}, {"t": "donut", "g": 14, "r": 13}, {"t": "donut", "g": 86, "r": 90}, {"t": "donut", "g": 75, "r": 76}, {"t": "donut", "g": 50, "r": 65}, {"t": "circleArea", "g": 14, "r": 64}, {"t": "circleArea", "g": 38, "r": 73}, {"t": "circleArea", "g": 62, "r": 82}, {"t": "circleArea", "g": 86, "r": 93}, {"t": "circleArea", "g": 50, "r": 80}, {"t": "circleArea", "g": 75, "r": 95}, {"t": "circleArea", "g": 25, "r": 68}, {"t": "starArea", "g": 38, "r": 57}, {"t": "starArea", "g": 14, "r": 66}, {"t": "starArea", "g": 86, "r": 98}, {"t": "starArea", "g": 62, "r": 89}, {"t": "starArea", "g": 75, "r": 97}, {"t": "starArea", "g": 25, "r": 71}, {"t": "starArea", "g": 50, "r": 64}, {"t": "saturation", "g": 38, "r": 62}, {"t": "saturation", "g": 50, "r": 70}, {"t": "saturation", "g": 25, "r": 28}, {"t": "saturation", "g": 86, "r": 90}, {"t": "saturation", "g": 14, "r": 9}, {"t": "saturation", "g": 62, "r": 36}, {"t": "saturation", "g": 75, "r": 80}, {"t": "radialBars", "g": 86, "r": 80}, {"t": "radialBars", "g": 14, "r": 9}, {"t": "radialBars", "g": 25, "r": 14}, {"t": "radialBars", "g": 62, "r": 57}, {"t": "radialBars", "g": 50, "r": 36}, {"t": "radialBars", "g": 75, "r": 66}, {"t": "radialBars", "g": 38, "r": 18}, {"t": "circleArea", "g": 14, "r": 31}, {"t": "circleArea", "g": 86, "r": 100}, {"t": "circleArea", "g": 62, "r": 88}, {"t": "circleArea", "g": 38, "r": 63}, {"t": "circleArea", "g": 75, "r": 90}, {"t": "circleArea", "g": 50, "r": 72}, {"t": "circleArea", "g": 25, "r": 35}, {"t": "saturation", "g": 75, "r": 79}, {"t": "saturation", "g": 86, "r": 85}, {"t": "saturation", "g": 25, "r": 24}, {"t": "saturation", "g": 38, "r": 41}, {"t": "saturation", "g": 62, "r": 62}, {"t": "saturation", "g": 14, "r": 12}, {"t": "saturation", "g": 50, "r": 45}, {"t": "alignedBars", "g": 62, "r": 94}, {"t": "alignedBars", "g": 38, "r": 100}, {"t": "alignedBars", "g": 75, "r": 72}, {"t": "alignedBars", "g": 50, "r": 49}, {"t": "alignedBars", "g": 14, "r": 17}, {"t": "alignedBars", "g": 25, "r": 23}, {"t": "alignedBars", "g": 86, "r": 86}, {"t": "donut", "g": 86, "r": 80}, {"t": "donut", "g": 25, "r": 15}, {"t": "donut", "g": 14, "r": 15}, {"t": "donut", "g": 75, "r": 75}, {"t": "donut", "g": 62, "r": 49}, {"t": "donut", "g": 38, "r": 23}, {"t": "donut", "g": 50, "r": 34}, {"t": "pie", "g": 50, "r": 50}, {"t": "pie", "g": 14, "r": 11}, {"t": "pie", "g": 62, "r": 70}, {"t": "pie", "g": 86, "r": 90}, {"t": "pie", "g": 75, "r": 80}, {"t": "pie", "g": 38, "r": 33}, {"t": "pie", "g": 25, "r": 14}, {"t": "stackedBars", "g": 75, "r": 47}, {"t": "stackedBars", "g": 50, "r": 51}, {"t": "stackedBars", "g": 62, "r": 50}, {"t": "stackedBars", "g": 86, "r": 79}, {"t": "stackedBars", "g": 25, "r": 15}, {"t": "stackedBars", "g": 38, "r": 26}, {"t": "stackedBars", "g": 14, "r": 10}, {"t": "starArea", "g": 86, "r": 95}, {"t": "starArea", "g": 50, "r": 83}, {"t": "starArea", "g": 38, "r": 71}, {"t": "starArea", "g": 14, "r": 39}, {"t": "starArea", "g": 62, "r": 73}, {"t": "starArea", "g": 25, "r": 50}, {"t": "starArea", "g": 75, "r": 95}];

  const margin = {top: 10, right: 30, bottom: 40, left: 160};
  const width = 860 - margin.left - margin.right;
  const height = 360 - margin.top - margin.bottom;

  const svg = d3.select("#chart-strip").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g").attr("transform", `translate(${margin.left},${margin.top})`);

  const labels = data.map(d => d.label);
  const x = d3.scaleLinear().domain([0, 80]).range([0, width]);
  const y = d3.scaleBand().domain(labels).range([0, height]).padding(0.3);

  svg.selectAll(".grid").data(x.ticks(5)).enter().append("line")
    .attr("x1", d => x(d)).attr("x2", d => x(d))
    .attr("y1", 0).attr("y2", height)
    .attr("stroke", "#e5e5e5").attr("stroke-dasharray", "2,3");

  svg.append("g").attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x).ticks(5))
    .selectAll("text").style("font-size", "12px");

  svg.append("text")
    .attr("x", width/2).attr("y", height + 35)
    .attr("text-anchor", "middle").style("font-size", "13px").style("fill", "#6b6b6b")
    .text("Absolute Error (percentage points)");

  svg.append("g").call(d3.axisLeft(y).tickSize(0)).select(".domain").remove();
  svg.selectAll(".tick text").style("font-size", "13px").style("font-weight", "500");

  const typeToLabel = {};
  data.forEach(d => typeToLabel[d.type] = d.label);
  const typeToColor = {};
  data.forEach(d => typeToColor[d.type] = d.category === "prior" ? colorPrior : colorNovel);

  rawTrials.forEach(d => {
    const lbl = typeToLabel[d.t];
    if (!lbl) return;
    const err = Math.abs(d.r - d.g);
    const bw = y.bandwidth();
    const jitter = (Math.random() - 0.5) * bw * 0.8;
    svg.append("circle")
      .attr("cx", x(Math.min(err, 80)))
      .attr("cy", y(lbl) + bw/2 + jitter)
      .attr("r", 2.5)
      .attr("fill", typeToColor[d.t])
      .attr("opacity", 0.35);
  });
})();
</script>

</body>
</html>
